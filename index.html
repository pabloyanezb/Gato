<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>Juego del Gato</title>
  </head>
  <body>
      <div class="background">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <a class="navbar-brand" href="#">Juego del Gato</a>
            <button class="btn btn-outline-success my-2 my-sm-0 offset-lg-10" type="submit">Iniciar</button>
          </nav>
          <div class="container">
              <div class="row">
                  <div class="col-3">
                    <div class="card">
                        <div class="card-header">
                          <p>Siguiente Jugador</p>
                          <p class="siguiente">X</p>
                        </div>
                        <!-- <div class="card-body">
                          <h5 class="card-title">Special title treatment</h5>
                          <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                          <a href="#" class="btn btn-primary">Go somewhere</a>
                        </div> -->
                      </div>
                  </div>
                  <div class="col-6">
                    <div class="jumbotron">
                        <div class="tablero">
                            <div class="row">
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                            </div>
                            <div class="row">
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                            </div>
                            <div class="row">
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                                <div class="col-4">
                                    <div class="celda"></div></div>
                            </div>
                            
                        </div>
                      </div>
                  </div>
                  <div class="col-3">
                    <div class="card">
                        <div class="card-header">
                          Puntajes Parciales:
                        </div>
                        <div class="card-body tabla">
                          <table class="table table-striped table-hover">
                            <thead>
                              <tr class="table-success">
                                <th scope="col">Jugador</th>
                                <th scope="col">Puntaje</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <th scope="row">X</th>
                                <td>3</td>
                              </tr>
                              <tr>
                                <th scope="row">O</th>
                                <td>2</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                  </div>
              </div>
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                    Launch demo modal
                </button>
                
                <!-- Modal -->
                <div class="modal fade" id="modal-ganador" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Ganaste!</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        </div>
                        <div class="modal-body">
                          Felicidades al Jugador O por ganar.
                        </div>
                        <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Save changes</button>
                        </div>
                    </div>
                    </div>
                </div>
          </div>
      </div>
      

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script>
        // Acá va nuestro código
      var hay_ganador = false;

        function traer_valores() {
          var valores = [];
          // recorrer las celdas trayendome el valor de cada una
          $('.celda').each(function(){

            var valor_celda = $(this).html();
            valores.push(valor_celda);

          });
          return valores;
        }
        function ganar_O(num1, num2, num3) {
          $('#modal-ganador').modal('show');
          $(".celda:eq(" + num1 + "), .celda:eq(" + num2 + "), .celda:eq(" + num3 + ")").addClass('ganadora');
          hay_ganador = true;
        }

        $('.celda').on('click', function() {
          //chequeo que todavia nadie haya ganado
          if (hay_ganador) {
            return;
          }

          // verificar que la celda no este ocupada
          var contenido_celda = $(this).html();
          if (contenido_celda != '') {
            return;
          }
          // ver a que jugador le toca
          var siguiente = $('.siguiente').html();
          // jugar
          $(this).html(siguiente);
          // cambiar el valor del jugador siguiente
          if (siguiente == 'O'){
            $('.siguiente').html('X');
          } else {
            $('.siguiente').html('O');
          }

          // verificar si gana el jugador O
          var valores = traer_valores();
          // primera fila
          if (valores[0] == 'O' && valores[1] == 'O' && valores[2] == 'O') {
            ganar_O('0', '1', '2');
            // $('.celda').html('');
            // segunda fila
          } else if (valores[3] == 'O' && valores[4] == 'O' && valores[5] == 'O') {
            ganar_O('3', '4', '5');
            // $('.celda').html('');
            // tercera fila
          } else if (valores[6] == 'O' && valores[7] == 'O' && valores[8] == 'O') {
            ganar_O('6', '7', '8');
            // $('.celda').html('');
          } else if (valores[0] == 'O' && valores[3] == 'O' && valores[6] == 'O') {
            ganar_O('0', '3', '6');
            // $('.celda').html('');
          } else if (valores[1] == 'O' && valores[4] == 'O' && valores[7] == 'O') {
            ganar_O('1', '4', '7');
            // $('.celda').html('');
          } else if (valores[2] == 'O' && valores[5] == 'O' && valores[8] == 'O') {
            ganar_O('2', '5', '8');
            // $('.celda').html('');
          } else if (valores[0] == 'O' && valores[4] == 'O' && valores[8] == 'O') {
            ganar_O('0', '4', '8');
            // $('.celda').html('');
          } else if (valores[2] == 'O' && valores[4] == 'O' && valores[6] == 'O') {
            ganar_O('2', '4', '6');
            // $('.celda').html('');
          }

          // verificar si gano el jugador X

        });
    </script>
  </body>
</html>